---
title: Captions Control
description: Button component for toggling captions visibility
---

import { Step, Steps } from 'fumadocs-ui/components/steps';

import {
  CaptionsContainer,
  CaptionsControl,
} from "@/registry/default/ui/captions"

import { CaptionsStateControlDemo, CaptionsHybridDemo } from "@/registry/default/examples/captions-state-control-demo"

<ComponentPreview name="captions-state-control-demo" withPlayer type="hybrid" blockChildren={<CaptionsStateControlDemo />} overlayChildren={<CaptionsHybridDemo />} />

## Installation

<Steps>
<Step>
### Install the component
```bash
npx shadcn add @limeplay/captions
```
</Step>

<Step>
### Add Event & Action Bridge
Import the `useCaptionsStates` hook in your existing `PlayerHooks` component.

```tsx lineNumbers title="components/limeplay/player-hooks.tsx"
import React from "react"

import { useCaptionsStates } from "@/hooks/limeplay/use-captions" // [!code ++]
import { useShakaPlayer } from "@/hooks/limeplay/use-shaka-player"
import { usePlayerStates } from "@/hooks/limeplay/use-player"

export const PlayerHooks = React.memo(() => {
  useShakaPlayer()
  usePlayerStates()
  useCaptionsStates() // [!code ++]

  return null
})
```
</Step>

<Step>
### Add the Store States

```tsx lineNumbers title="lib/create-media-store.ts"
import { create } from "zustand"

import {
  createCaptionsStore,
  CaptionsStore,
} from "@/hooks/limeplay/use-captions" // [!code ++]
import {
  createPlayerStore,
  PlayerStore,
} from "@/hooks/limeplay/use-player"

export type TypeMediaStore = PlayerStore &
  CaptionsStore & {} // [!code ++]

export function createMediaStore(initProps?: Partial<CreateMediaStoreProps>) {
  const mediaStore = create<TypeMediaStore>()((...etc) => ({
    ...createPlayerStore(...etc),
    ...createCaptionsStore(...etc), // [!code ++]
    ...initProps,
  }))
  return mediaStore
}
```
</Step>
</Steps>

## Usage

### Basic Captions Control

Create a captions toggle button with appropriate icons and states.

```tsx lineNumbers title="components/player/captions-control-button.tsx"
import { CaptionsControl } from "@/components/limeplay/captions-control"
import { useMediaStore } from "@/components/limeplay/media-provider"
import { ClosedCaptioningIcon } from "@phosphor-icons/react"

export function CaptionsControlButton() {
  const textTracks = useMediaStore((state) => state.textTracks)
  const textTrackVisible = useMediaStore((state) => state.textTrackVisible)

  return (
    <Button size="icon" variant="glass" asChild>
      <CaptionsControl>
        <ClosedCaptioningIcon
          weight={textTrackVisible ? "fill" : "regular"}
          size={18}
        />
      </CaptionsControl>
    </Button>
  )
}
```

### Place in Player Layout

For captions to work properly, you need both the control button and the captions container:

#### Option 1: Hybrid Layout (Recommended)
Use the hybrid layout to place the control button outside the player and the captions container inside:

```tsx lineNumbers title="components/player/captions-demo.tsx"
import { PlayerLayoutDemo } from "@/components/demo/player-root-demo"
import { CaptionsStateControlDemo, CaptionsHybridDemo } from "@/components/demo/captions-state-control-demo"

export function CaptionsDemo() {
  return (
    <PlayerLayoutDemo
      type="hybrid"
      overlayChildren={<CaptionsHybridDemo />}
      blockChildren={<CaptionsStateControlDemo />}
    />
  )
}
```

#### Option 2: Traditional Layout
Add both components to your player's layout:

```tsx lineNumbers title="components/player/media-player.tsx"
<Layout.ControlsContainer>
  <CaptionsContainer /> {/* For rendering captions */}
  <Layout.ControlsBottomContainer>
    <BottomControls>
      <CaptionsControlButton /> {/* For toggle button */}
    </BottomControls>
  </Layout.ControlsBottomContainer>
</Layout.ControlsContainer>
```

## Understanding

The `CaptionsControl` component provides a standardized way to toggle captions visibility. It:

- Automatically disables when no text tracks are available
- Handles track selection automatically (selects default track if none active)
- Provides proper accessibility attributes including keyboard shortcuts
- Integrates with the captions store for state management

The component is designed to work seamlessly with Shaka Player's text track system and provides a consistent user experience across different media sources.
