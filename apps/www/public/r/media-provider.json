{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "media-provider",
  "type": "registry:ui",
  "files": [
    {
      "path": "registry/default/ui/media-provider.tsx",
      "content": "\"use client\"\n\nimport React, { createContext, useContext, useRef } from \"react\"\nimport { useStore } from \"zustand\"\n\nimport {\n  CreateMediaStoreProps,\n  TypeMediaStore,\n  createMediaStore,\n} from \"@/registry/default/internal/create-media-store\"\n\ntype MediaProviderContext = ReturnType<typeof createMediaStore>\n\nconst MediaProviderContext = createContext<MediaProviderContext | null>(null)\n\nexport function MediaProvider({\n  children,\n  ...props\n}: React.PropsWithChildren<CreateMediaStoreProps>) {\n  const store = useRef(createMediaStore(props)).current\n\n  return (\n    <MediaProviderContext.Provider value={store}>\n      {children}\n    </MediaProviderContext.Provider>\n  )\n}\n\nfunction useMediaStoreWithContext<T>(\n  selector: (state: TypeMediaStore) => T\n): T {\n  const storeFromCtx = useContext(MediaProviderContext)\n\n  if (!storeFromCtx) {\n    throw new Error(\"Missing MediaProvider in root\")\n  }\n\n  return useStore(storeFromCtx, selector)\n}\n\nlet globalStore: ReturnType<typeof createMediaStore> | null = null\n\n// DEV: Migrate to conditional calling without context\nfunction useMediaStoreWithoutContext<T>(\n  selector: (state: TypeMediaStore) => T,\n  options?: CreateMediaStoreProps\n): T {\n  if (!globalStore) {\n    globalStore = createMediaStore(options || {})\n  }\n\n  return useStore(globalStore, selector)\n}\n\nexport function useGetStore() {\n  const storeFromCtx = useContext(MediaProviderContext)\n\n  if (!storeFromCtx) {\n    throw new Error(\"Missing MediaProvider in root\")\n  }\n\n  return storeFromCtx\n}\n\nexport const useMediaStore = useMediaStoreWithContext\n",
      "type": "registry:ui"
    }
  ]
}