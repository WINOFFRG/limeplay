{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "player-layout",
  "type": "registry:ui",
  "dependencies": [
    "@radix-ui/react-compose-refs"
  ],
  "files": [
    {
      "path": "registry/default/ui/player-layout.tsx",
      "content": "import { cn } from \"@/lib/utils\";\nimport React, { ComponentPropsWithoutRef } from \"react\";\nimport { useMediaStore } from \"@/registry/default/ui/media-provider\";\nimport { composeRefs } from \"@radix-ui/react-compose-refs\";\n\nexport function PlayerContainer({\n  children,\n  className,\n  ...props\n}: ComponentPropsWithoutRef<\"div\">) {\n  return (\n    <div\n      data-layout-type=\"player-container\"\n      className={cn(\n        \"aspect-(--aspect-ratio) relative max-h-[min(var(--height,_720px),_calc(100vh_-_16px_*_2))] w-auto overflow-hidden rounded-lg\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n    </div>\n  );\n}\n\nexport function ControlsContainer({\n  children,\n  className,\n  ...props\n}: ComponentPropsWithoutRef<\"div\">) {\n  return (\n    <div\n      data-layout-type=\"controls-container\"\n      className={cn(\"pointer-events-auto absolute inset-0\", className)}\n      {...props}\n    >\n      {children}\n    </div>\n  );\n}\n\nexport interface RootContainerProps\n  extends React.ComponentPropsWithoutRef<\"div\"> {\n  height?: number;\n  width?: number;\n  className?: string;\n}\n\nexport const RootContainer = React.forwardRef<\n  HTMLDivElement,\n  RootContainerProps\n>((props, forwardedRef) => {\n  const { children, height, width, className } = props;\n  const idle = useMediaStore((state) => state.idle);\n  const status = useMediaStore((state) => state.status);\n  const setPlayerContainerRef = useMediaStore(\n    (state) => state.setPlayerContainerRef\n  );\n  const aspectRatio = React.useMemo(\n    () => calculateAspectRatio(width, height),\n    [height, width]\n  )\n    ?.split(\":\")\n    ?.join(\"/\");\n\n  return (\n    <div\n      tabIndex={0}\n      aria-label=\"Media player\"\n      role=\"region\"\n      data-idle={idle}\n      ref={composeRefs(forwardedRef, setPlayerContainerRef)}\n      data-status={status}\n      data-theme={\"light\"}\n      style={{\n        [\"--width\" as string]: `${width}px`,\n        [\"--height\" as string]: `${height}px`,\n        [\"--aspect-ratio\" as string]: aspectRatio,\n        aspectRatio: aspectRatio\n      }}\n      className={cn(\"m-auto min-w-80 max-w-[var(--width,1280px)]\", className)}\n      // Show controls like tabbing over\n      // onKeyDown={}\n      // onPointerMove show controls again\n      // onPointerUp IDK yet, but probably\n      // onPointerLeave hide controls now, maybe with timeout?\n      // onFocus show controls and set focus true so that keyboard shortcuts are triggered\n      // onBlur hide controls and set focus to false\n      {...props}\n    >\n      {children}\n    </div>\n  );\n});\n\nfunction calculateAspectRatio(width?: number, height?: number) {\n  if (width && height) {\n    const gcd = (a: number, b: number): number => {\n      return b === 0 ? a : gcd(b, a % b);\n    };\n    const divisor = gcd(width, height);\n    const aspectWidth = width / divisor;\n    const aspectHeight = height / divisor;\n    return `${aspectWidth}:${aspectHeight}`;\n  }\n}\n",
      "type": "registry:ui"
    },
    {
      "path": "registry/default/ui/media-provider.tsx",
      "content": "\"use client\";\n\nimport React, { createContext, useContext, useRef } from \"react\";\nimport { useStore } from \"zustand\";\n\nimport {\n  createMediaStore,\n  CreateMediaStoreProps,\n  TypeMediaStore\n} from \"@/registry/default/lib/create-media-store-demo\";\n\ntype MediaProviderContext = ReturnType<typeof createMediaStore>;\n\nconst MediaProviderContext = createContext<MediaProviderContext | null>(null);\n\ntype MediaProviderProps = CreateMediaStoreProps;\n\nexport function MediaProvider({\n  children,\n  ...props\n}: React.PropsWithChildren<MediaProviderProps>) {\n  const store = useRef(createMediaStore(props)).current;\n\n  return (\n    <MediaProviderContext.Provider value={store}>\n      {children}\n    </MediaProviderContext.Provider>\n  );\n}\n\nfunction useMediaStoreWithContext<T>(\n  selector: (state: TypeMediaStore) => T\n): T {\n  const storeFromCtx = useContext(MediaProviderContext);\n\n  if (!storeFromCtx) {\n    throw new Error(\"Missing MediaProvider in root\");\n  }\n\n  return useStore(storeFromCtx, selector);\n}\n\nlet globalStore: ReturnType<typeof createMediaStore> | null = null;\n\n// DEV: Migrate to conditional calling without context\nfunction useMediaStoreWithoutContext<T>(\n  selector: (state: TypeMediaStore) => T,\n  options?: CreateMediaStoreProps\n): T {\n  if (!globalStore) {\n    globalStore = createMediaStore(options || {});\n  }\n\n  return useStore(globalStore, selector);\n}\n\nexport const useMediaStore = useMediaStoreWithContext;\n",
      "type": "registry:ui"
    }
  ]
}