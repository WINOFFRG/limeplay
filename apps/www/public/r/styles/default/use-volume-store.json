{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "use-volume-store",
  "type": "registry:hook",
  "dependencies": [
    "lodash.clamp"
  ],
  "registryDependencies": [
    "https://limeplay.winoffrg.dev/r/styles/default/use-player-root-store.json"
  ],
  "files": [
    {
      "path": "registry/default/hooks/use-volume-store.ts",
      "content": "import clamp from \"lodash.clamp\"\nimport { StateCreator } from \"zustand\"\n\nimport { PlayerRootStore } from \"@/registry/default/hooks/use-player-root-store\"\n\nexport interface VolumeStore {\n  volume: number\n  setVolume: (volume: number, progress?: number, delta?: number) => void\n  muted: boolean\n  setMuted: (muted: boolean) => void\n  toggleMute: () => void\n  hasAudio: boolean\n  setHasAudio: (hasAudio: boolean) => void\n}\n\nconst BASE_RESET_VOLUME = 0.05\n\nexport const createVolumeStore: StateCreator<\n  VolumeStore & PlayerRootStore,\n  [],\n  [],\n  VolumeStore\n> = (set) => ({\n  volume: 1,\n  muted: false,\n  setMuted: (muted: boolean) => set({ muted }),\n  toggleMute: () =>\n    set((state) => ({\n      muted: !state.muted,\n      // DEV: Volume 0 and muted are equivalent, to prevent collision in UI\n      // set to some small value to prevent stuck toggling state of UI.\n      volume: state.volume === 0 ? BASE_RESET_VOLUME : state.volume,\n      idle: false,\n    })),\n  setVolume: (volume: number, delta = 0, progress?: number) => {\n    // DEV: Fix the self calling issue in case of delta useVolumeState listens\n    // to the new updated value of volume and increases the volume until reaches\n    // to 1\n    const value = typeof delta === \"number\" ? volume + delta : progress\n\n    if (value === undefined || Number.isNaN(value)) {\n      return\n    }\n\n    const _volume = clamp(value, 0, 1)\n    const _muted = _volume === 0\n\n    set({ volume: _volume, muted: _muted })\n  },\n  hasAudio: true,\n  setHasAudio: (hasAudio) => {\n    set({ hasAudio: hasAudio })\n  },\n})\n",
      "type": "registry:hook"
    }
  ]
}