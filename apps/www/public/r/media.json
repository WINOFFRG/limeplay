{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "media",
  "type": "registry:ui",
  "dependencies": [
    "@radix-ui/react-compose-refs"
  ],
  "registryDependencies": [
    "https://limeplay.winoffrg.dev/r/styles/default/media-provider.json"
  ],
  "files": [
    {
      "path": "registry/default/ui/media.tsx",
      "content": "import * as React from \"react\"\nimport { composeRefs } from \"@radix-ui/react-compose-refs\"\n\nimport { useVolume } from \"@/registry/default/hooks/use-volume\"\n\nimport { useMediaStore } from \"./media-provider\"\n\n// Define a discriminated union type for the component props\ntype MediaProps =\n  | ({ as: \"video\" } & React.VideoHTMLAttributes<HTMLVideoElement>)\n  | ({ as: \"audio\" } & React.AudioHTMLAttributes<HTMLAudioElement>)\n\nexport const Media = React.forwardRef<HTMLMediaElement, MediaProps>(\n  (props, forwardedRef) => {\n    const { as: Element = \"video\", ...etc } = props\n    const mediaRef = React.useRef<HTMLMediaElement>(null)\n    const setMediaRef = useMediaStore((state) => state.setMediaRef)\n    const status = useMediaStore((state) => state.status)\n    const setStatus = useMediaStore((state) => state.setStatus)\n\n    const { setMuted } = useVolume()\n\n    React.useEffect(() => {\n      if (!mediaRef?.current) {\n        return\n      }\n\n      setMediaRef(mediaRef as React.RefObject<HTMLMediaElement>)\n\n      if (mediaRef.current.error) {\n        console.error(mediaRef.current.error)\n        return\n      }\n\n      if (mediaRef.current.readyState >= 2) {\n        const shouldAutoplay = mediaRef.current.autoplay\n        setStatus(shouldAutoplay ? \"playing\" : \"paused\")\n      }\n    }, [])\n\n    React.useEffect(() => {\n      if (mediaRef.current) {\n        const defaultMuted = mediaRef.current.muted\n        setMuted(defaultMuted)\n      }\n    }, [])\n\n    return (\n      <Element\n        ref={composeRefs(forwardedRef, mediaRef)}\n        aria-busy={status === \"buffering\"}\n        {...etc}\n      />\n    )\n  }\n)\n\nMedia.displayName = \"Media\"\n",
      "type": "registry:ui"
    }
  ]
}